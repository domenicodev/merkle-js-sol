# JavaScript Merkle Tree Utilities

This directory contains JavaScript utilities for generating Merkle trees and proofs compatible with the Aptos Move implementation.

## Files

- `merkleUtils.js` - Basic Merkle tree generation and verification utilities
- `generateAptosProof.js` - Generates Merkle proofs specifically for the Aptos WhitelistedNFT module

## Usage

To generate Merkle proofs for use with the Aptos WhitelistedNFT module:

```bash
cd scripts
node generateAptosProof.js
```

This will output:
1. A Merkle root to use when initializing your collection
2. Merkle proofs for each address in the whitelist
3. Example Move code showing how to use the generated values

## Implementation Details

The JavaScript implementation follows these principles to ensure compatibility with the Move implementation:

1. Uses `keccak256` hashing (SHA3-256 equivalent)
2. Handles address serialization consistently 
3. Sorts node pairs lexicographically before hashing

## Important Note

The current implementation has a compatibility issue with the Move Merkle proof verification. When using proofs generated by this JavaScript implementation in the WhitelistedNFT module, verification will fail due to differences in how the addresses are serialized between JavaScript and Move.

To fix this, future versions will need to implement BCS (Binary Canonical Serialization) in JavaScript to match the Move implementation's serialization of addresses. 